<div class="container my-4">
  <h1 class="mb-4">一文を投稿する</h1>

  <!-- 書籍情報 -->
  <div class="card mb-4">
    <div class="card-body">
      <h2 class="h6">投稿対象の本</h2>
      <p>
        <strong><%= @book.title %></strong><br>
        <%= @book.publisher %>（<%= @book.published_on&.strftime("%Y-%m-%d") %>）<br>
        ISBN: <%= @book.isbn13 %>
      </p>
      <% if @book.cover_url.present? %>
        <img src="<%= @book.cover_url %>" alt="書影" style="max-height: 180px;">
      <% end %>
    </div>
  </div>

  <!-- 投稿フォーム -->
  <div class="card">
    <div class="card-body">
      <%= form_with model: @quote, url: quotes_path, method: :post, local: true do |f| %>
        <%= f.hidden_field :book_id, value: @book.id %>

        <% if @quote.errors.any? %>
          <div class="alert alert-danger">
            <ul>
              <% @quote.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="mb-3">
          <%= f.label :body, "引用本文（200字以内）", class: "form-label" %>
          <%= f.text_area :body, rows: 5, class: "form-control" %>
        </div>

        <div class="mb-3">
          <%= f.label :page, "ページ番号（任意）", class: "form-label" %>
          <%= f.number_field :page, class: "form-control", style: "width: 120px;" %>
        </div>

        <%= f.submit "投稿する", class: "btn btn-success", data: { turbo: false } %>
      <% end %>
    </div>
  </div>
</div>
